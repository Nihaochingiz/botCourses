const VkBot = require('node-vk-bot-api');
const token = "81a9c491096977dd53d192c2315133e99f13cc471e2a0cb445ec999b6e4ab191a16733aba3947b40c6d9a"
const bot = new VkBot(token)
const Markup = require('node-vk-bot-api/lib/markup');
const keyWords = ["Ñ€Ð°Ð·","Ð´Ð²Ð°","Ñ‚Ñ€Ð¸"]

const helloWorld = "Ð¥Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹ Ñ‡ÐµÐº Ð»Ð¸ÑÑ‚ 7 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² ÑÐµÐ±Ðµ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»Ð° Ð¸Ð»Ð¸ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ð¾ ÐºÑƒÑ€ÑÐµ Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑ‚Ñ€Ð¸Ñ ÐšÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÑƒÑŽ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð½Ð¸Ð¶Ðµ:"
const book  = "Ð§ÐµÐº Ð»Ð¸ÑÑ‚ 7 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² ÑÐµÐ±Ðµ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ð°Ð¼ Ð½Ð°ÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ:- ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð» ðŸ’°;- Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ Ð´Ð¾Ñ…Ð¾Ð´ Ð¾Ñ‚ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»Ð°;- Ð³Ñ€Ð°Ð¼Ð¾Ñ‚Ð½Ð¾ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¸Ð¼;- Ð¸ Ð·Ð°Ñ‰Ð¸Ñ‰Ð°Ñ‚ÑŒ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð».Ð§Ñ‚Ð¾Ð±Ñ‹ ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ, ÐºÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð½Ð¸Ð¶Ðµ ðŸ‘‡"
const message = "ÐÐ°Ð²ÐµÑ€Ð½ÑÐºÐ° Ð¿Ð¾ÑÐ»Ðµ Ð¿Ñ€Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ñƒ Ð²Ð°Ñ Ð² Ð¼Ñ‹ÑÐ»ÑÑ… ÑƒÐ¶Ðµ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ Ð¿Ð¾Ñ‚Ð¸Ñ…Ð¾Ð½ÑŒÐºÑƒ Ð·Ð°Ñ€Ð¾Ð¶Ð´Ð°Ñ‚ÑŒÑÑ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½.Ð§Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ ÑÐ²Ð¾ÑŽ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½ÑƒÑŽ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð¸ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½ÑƒÑŽ Ð¶Ð¸Ð·Ð½ÑŒ ÑÐµÐ±Ðµ Ð¸ ÑÐ²Ð¾Ð¸Ð¼ Ð¿Ð¾Ñ‚Ð¾Ð¼ÐºÐ°Ð¼, Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¾Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒÑÑ Ð² ÑÑ‚Ñƒ Ñ‚ÐµÐ¼Ñƒ Ñ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð¹. ðŸ‘¨â€ðŸ’»ðŸ“ÐžÐ± ÑÑ‚Ð¾Ð¼ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ Ð¸ Ð¿Ð¾Ð¿ÑƒÐ½ÐºÑ‚Ð°Ð¼ Ð¼Ñ‹ Ñ€Ð°ÑÑÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð½Ð° ÐºÑƒÑ€ÑÐµÐ¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑ‚Ñ€Ð¸Ñ- Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð´Ð¾Ñ…Ð¾Ð´Ð°;- Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð³Ð¾ Ñ€Ð¾ÑÑ‚Ð°;- ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¿Ð»Ð°Ð½Ð¾Ð¼ÐµÑ€Ð½Ñ‹Ñ… Ð½Ð°ÐºÐ¾Ð¿Ð»ÐµÐ½Ð¸Ð¹- Ð²Ñ‹ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÐ¼ Ñ‰Ð¸Ñ‚ Ð¾Ñ‚ Ð¿Ð¾Ñ‚ÐµÑ€ÑŒ.Ð¥Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½ÑƒÑŽÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸ÑŽ Ð¾Ñ‚ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð°?"
const refuseMessage = "Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð½Ð¸Ð¶Ðµ, ÐºÐ°Ðº Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚Ðµ ÐµÐ³Ð¾ ðŸ‘‡Ð¯ Ð´Ð°Ð¼ Ð²Ð°Ð¼ ÐµÑ‰Ðµ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð² Ð´Ð¾Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ðº Ð½ÐµÐ¼Ñƒ."
const areYouSureMessage = "Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹?";
const byeMessage = "Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾. Ð£Ð²ÐµÑ€ÐµÐ½Ð°, Ñ‡Ñ‚Ð¾ Ð½Ð° Ð¼Ð¾ÐµÐ¼ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ðµ Ð²Ñ‹ Ð½Ð°Ð¹Ð´ÐµÑ‚Ðµ ÐµÑ‰Ðµ Ð¼Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾Ð¹ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ ðŸ˜‰"
const beginQuiz= "ÐžÑ‚Ð²ÐµÑ‚ÑŒÑ‚Ðµ Ð½Ð° 4 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° Ð½Ð¸Ð¶Ðµ Ð¸ ÑÐºÑÐ¿ÐµÑ€Ñ‚, Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰Ð¸Ð¹ Ð¿Ð¾ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸ Â«Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑ‚Ñ€Ð¸ÑÂ» Ð¿Ñ€Ð¾ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð²Ð°Ñ ðŸ‘‡"
const firstQuestion = "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‚ Ð²Ð°Ð¼:"
const firstAnswer = {
  1: "Ð•ÑÑ‚ÑŒ Ð¿Ð»Ð°Ð½ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ Ð½Ð° 5 Ð»ÐµÑ‚",  
  2: "Ð¯ Ð½Ðµ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÑŽ Ð´Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ð¾", 
  3: "ÐœÐ¾Ð¸Ñ… Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð² Ñ…Ð²Ð°Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Ð¼ÐµÑÑÑ†", 
  4: "Ð”ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽ Ð¿Ð¾ Ð¾Ð±ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÑÑ‚Ð²Ð°Ð¼", 
}

const secondQuestion = "Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð»ÑƒÑ‡ÑˆÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ð°Ñ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚:";
const secondAnswer = {
  1: " Ð¯ Ð»ÐµÐ³ÐºÐ¾ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÑŽ Ð²Ð°Ð¶Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ",  
  2: "ÐœÐ¾Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð·Ð°Ñ‡Ð°ÑÑ‚ÑƒÑŽ Ð·Ð°Ð²Ð¸ÑÑÑ‚ Ð¾Ñ‚ Ñ‡ÑƒÐ¶Ð¾Ð³Ð¾ Ð¼Ð½ÐµÐ½Ð¸Ñ", 
  3: "ÐÐµ ÑƒÐ¼ÐµÑŽ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ â€œÐ½ÐµÑ‚â€, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð½Ð°ÐºÐ°Ð¿Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ Ð½ÐµÐ³Ð°Ñ‚Ð¸Ð²", 
  4: "ÐœÐ½Ðµ ÑÐ»Ð¾Ð¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ, Ð¿ÑƒÐ³Ð°ÑŽÑ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ñ‹", 
}

const thirdQuestion = "Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ð»ÑƒÑ‡ÑˆÐµ Ð²ÑÐµÐ³Ð¾ Ð²Ð°Ñ Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚:";
const thirdAnswer = {
  1: " Ð£ Ð¼ÐµÐ½Ñ Ð²ÑÐµÐ³Ð´Ð° ÐµÑÑ‚ÑŒ Ð¿Ð¾Ð´ÑƒÑˆÐºÐ° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸",  
  2: "Ð¯ Ð¶Ð¸Ð²Ñƒ Ð¾Ñ‚ Ð·Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ñ‹ Ð´Ð¾ Ð·Ð°Ñ€Ð¿Ð»Ð°Ñ‚Ñ‹", 
  3: "ÐœÐ¾Ð¸ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°ÑŽÑ‚ Ð´Ð¾Ñ…Ð¾Ð´Ñ‹", 
  4: "Ð—Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ð´ Ñƒ Ð¼ÐµÐ½Ñ Ð½Ð°ÐºÐ¾Ð¿Ð¸Ð»Ð¸ÑÑŒ Ð´Ð¾Ð»Ð³Ð¸", 
}

let userId;



function greeting(){
bot.command(keyWords, (ctx) => {

     userId = ctx.message.from_id || ctx.message.user_id;
    
     console.log(userId)

  ctx.reply(helloWorld , null, Markup
    .keyboard([
      'ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚',
      'Ð£Ð·Ð½Ð°Ñ‚ÑŒ Ð¾ ÐºÑƒÑ€ÑÐµ',
    ])
  );
  
})

}


function getCheckList(){
bot.command("ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚", (ctx) => {
  ctx.reply(book, null, Markup
    .keyboard([
      Markup.button({
        action: {
          type: 'open_link',
          link:  'https://drive.google.com/file/d/1UbQDHiwee8A2s94zO-61SEtYZdg50iYz/view',
          label: 'Ð—Ð°Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿Ð¾ÑÐ¾Ð±Ð¸Ðµ',
          payload:JSON.stringify({
            url: 'https://drive.google.com/file/d/1UbQDHiwee8A2s94zO-61SEtYZdg50iYz/view',
          }),
        },
      })])
      
)})
setTimeout(question,20000);         
}

function question(){
    bot.sendMessage(userId,"ÐÑƒ ÐºÐ°Ðº? Ð’Ñ‹ ÑƒÐ¶Ðµ Ð¸Ð·ÑƒÑ‡Ð¸Ð»Ð¸ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚?", null, Markup
      .keyboard([
        'Ð”Ð°',
        'ÐÐµÑ‚',
      ])
    );
  }


function sendMessage(userAnswer) {
  if (userAnswer === "ÐÐµÑ‚") {
  bot.command(userAnswer, (ctx) => {
    ctx.reply(refuseMessage , null, Markup
      .keyboard([
       'Ð”Ð°, Ñ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð»'
      ])
    );
    
  } 
  )}
  if (userAnswer === "Ð”Ð°") {
    bot.command(userAnswer, (ctx) => {
      ctx.reply(message , null, Markup
        .keyboard([
          'Ð”Ð°',
          'ÐÐµÑ‚',
        ])
      );
      
    })
    
  }
  
}




function areYouSure(userAnswerSure) {
  if (userAnswerSure === "ÐÐµÑ‚") {
    bot.command(userAnswerSure, (ctx) => {
      ctx.reply(refuseMessage , null, Markup
        .keyboard([
         'Ð”Ð°, Ñ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð»'
        ])
      );
      
    } 
    )}
    if (userAnswerSure === "Ð”Ð°") {
      bot.command(userAnswerSure, (ctx) => {
        ctx.reply(message , null, Markup
          .keyboard([
            'Yes',
            'No',
          ])
        );
        
      })
      
    }}





greeting();
getCheckList();
sendMessage("Ð”Ð°");
sendMessage("ÐÐµÑ‚");
areYouSure("Yes");
areYouSure("No");




bot.startPolling((err) => {
  if (err) {
    console.error(err);
  }
});

